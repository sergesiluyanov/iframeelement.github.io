<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <!-- НЕсовместимая политика - может вызвать проблемы с Domain Restrictions -->
    <meta name="referrer" content="no-referrer" />
    <title>Player - No referrer (тест ошибки)</title>
    <link
      rel="shortcut icon"
      href="http://example.com"
      type="image/x-icon"
    />
    <style>
      iframe[id^='sb__open-sandbox'] {
        top: 50%;
      }
    </style>
  </head>
  <body>
    <script src="https://player.kinescope.dev/v2.164.2/elements/kinescope-iframe-player.js"></script>

    <script>
      window.KinescopeIframePlayerConfig = {
        ...window.KinescopeIframePlayerConfig,
        player: {
          behavior: {
            localStorage: true,
          },
          ui: { playbackRateButton: true },
        },
      };
    </script>

    <kinescope-iframe-player
      id="player"
      t="3"
      style="background-color: greenyellow; border-radius: 20px"
    ></kinescope-iframe-player>

    <script>
      const playerEl = document.getElementById('player');
      
      playerEl.setAttribute(
        'url',
        'https://kinescope.dev/embed/scyyBw7LaySNJfcTRkqkyJ'
      );

      (async () => {
        try {
          const player = await playerEl.waitInstance();
          console.log('waitInstance', player);
          console.log('Referrer Policy (no-referrer):', document.referrer);
        } catch (error) {
          console.error('Ошибка загрузки плеера:', error);
          console.log('Это ожидаемо для no-referrer политики');
        }
      })();
    </script>
  </body>
</html>
