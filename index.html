<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>Player - Referrer Policy на элементах</title>
    <link 
      rel="shortcut icon" 
      href="https://sergesiluyanov.github.io/iframeelement.github.io/" 
      referrerpolicy="origin"
      type="image/x-icon" />
    <style>
      iframe[id^='sb__open-sandbox'] {
        top: 50%;
      }
    </style>
  </head>
  <body>
    <script 
      src="https://player.kinescope.dev/v2.164.2/elements/kinescope-iframe-player.js"
      referrerpolicy="strict-origin-when-cross-origin">
    </script>

    <script>
      window.KinescopeIframePlayerConfig = {
        ...window.KinescopeIframePlayerConfig,
        player: {
          behavior: {
            localStorage: true,
          },
          ui: { playbackRateButton: true },
        },
      };
    </script>

    <kinescope-iframe-player
      id="player"
      t="3"
      referrerpolicy="strict-origin-when-cross-origin"
      style="background-color: greenyellow; border-radius: 20px">
    </kinescope-iframe-player>

    <script>
      const playerEl = document.getElementById('player');
      
      playerEl.setAttribute(
        'url',
        'https://kinescope.dev/embed/4v3Wqopuq4hhy1VhZH3GVU'
      );

      (async () => {
        try {
          const player = await playerEl.waitInstance();
          console.log('waitInstance', player);
          console.log('Referrer Policy на элементе:', playerEl.getAttribute('referrerpolicy'));
        } catch (error) {
          console.error('Ошибка загрузки плеера:', error);
        }
      })();
    </script>
  </body>
</html>
